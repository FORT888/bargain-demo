<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<title>è”ä¿¡èµ„ Â· åŠ©åŠ›è½¬ç›˜</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#fff7ed,#fee2e2);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* ===== é¡µé¢é‡‘å¸ ===== */
#coins-bg{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}
.bg-coin{
  position:absolute;
  top:-40px;
  width:22px;
  height:22px;
  border-radius:50%;
  background:radial-gradient(circle,#fde68a,#f59e0b);
  opacity:.8;
  animation:fall linear infinite;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}

/* ===== ä¸»å¡ç‰‡ ===== */
.card{
  width:92%;
  max-width:420px;
  background:#fff;
  border-radius:28px;
  padding:22px 18px 28px;
  box-shadow:0 30px 80px rgba(0,0,0,.15);
  text-align:center;
  position:relative;
  z-index:2;
}

/* ===== æ ‡é¢˜ ===== */
h1{margin:6px 0;font-size:22px}
.sub{font-size:13px;color:#6b7280;margin-bottom:8px}

/* ===== å¥–å“ ===== */
.prize-box{
  margin:10px 0;
  font-size:15px;
  font-weight:600;
}
.prize-box span{color:#dc2626}

/* ===== è½¬ç›˜ ===== */
.wheel-wrap{
  position:relative;
  width:320px;
  height:320px;
  margin:14px auto;
}
canvas{
  width:100%;
  height:100%;
  border-radius:50%;
  transition:transform 3.5s cubic-bezier(.25,.9,.3,1);
}
.center{
  position:absolute;
  inset:50%;
  transform:translate(-50%,-50%);
  width:160px;
  height:160px;
  border-radius:50%;
  overflow:hidden;
  box-shadow:0 12px 36px rgba(0,0,0,.3);
  z-index:3;
}
.center img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* ===== è¿›åº¦æ¡ ===== */
.progress-wrap{
  margin-top:18px;
  padding:12px;
  background:#fff7ed;
  border-radius:16px;
}
.progress-bar{
  position:relative;
  height:14px;
  background:#fde68a;
  border-radius:999px;
  overflow:hidden;
}
.progress-inner{
  position:absolute;
  left:0;top:0;
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#ef4444,#f97316);
  border-radius:999px;
  transition:width .4s ease;
}
.progress-text{
  margin-top:8px;
  font-size:13px;
  font-weight:600;
  color:#b91c1c;
}

/* ===== æŒ‰é’® ===== */
.btn{
  width:100%;
  margin-top:12px;
  padding:14px;
  border:none;
  border-radius:16px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.primary{background:#ef4444;color:#fff}
.secondary{background:#fff1f2;color:#ef4444}

/* ===== å®Œæˆåº†ç¥ ===== */
#celebrate{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#fde68a,#fb7185);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:999;
}
#celebrate h2{color:#fff;font-size:28px}
#celebrate p{color:#fff}
</style>
</head>

<body>

<!-- é¡µé¢é‡‘å¸ -->
<div id="coins-bg"></div>

<div class="card">
  <h1>è”ä¿¡èµ„ Â· åŠ©åŠ›è½¬ç›˜</h1>
  <div class="sub">å®Œæˆè¿›åº¦è¶Šé«˜ï¼Œå¥–åŠ±è¶Šæ¥è¿‘</div>

  <div class="prize-box">
    å¥–å“ï¼š<span id="prizeText">æœªç¡®å®š</span>
  </div>

  <div class="wheel-wrap">
    <canvas id="wheel" width="320" height="320"></canvas>
    <div class="center"><img src="logo.png"></div>
  </div>

  <div class="progress-wrap">
    <div class="progress-bar">
      <div class="progress-inner" id="progressInner"></div>
    </div>
    <div class="progress-text" id="progressPercent">å·²å®Œæˆ 0%</div>
  </div>

  <button class="btn secondary" id="btnHelp">å¸®åŠ©å¥½å‹åŠ©åŠ›</button>
  <button class="btn primary" id="btnCreate">å‘èµ·åŠ©åŠ›è¯•è¯•</button>
</div>

<div id="celebrate">
  <h2>ğŸ‰ æ­å–œå®ŒæˆåŠ©åŠ› ğŸ‰</h2>
  <p>å¥–åŠ±å·²è¾¾æˆï¼Œè¯·è”ç³»å®¢æœé¢†å–</p>
</div>

<script>
/* ===== Firebase ===== */
firebase.initializeApp({
  apiKey:"AIzaSyA_GeAMtgqYBLG9z_EX529fVzmGYZbZl0Y",
  authDomain:"cut-demo-e11b9.firebaseapp.com",
  projectId:"cut-demo-e11b9"
});
const db=firebase.firestore();

/* ===== å¥–å“ ===== */
const PRIZES=[
  {key:"66",label:"çº¢åŒ…66å…ƒ"},
  {key:"88",label:"çº¢åŒ…88å…ƒ"},
  {key:"168",label:"çº¢åŒ…168å…ƒ"},
  {key:"388",label:"çº¢åŒ…388å…ƒ"},
  {key:"588",label:"çº¢åŒ…588å…ƒ"},
  {key:"888",label:"çº¢åŒ…888å…ƒ"},
  {key:"iphone",label:"iPhone 17 Pro Max"}
];

/* ===== è½¬ç›˜ç»˜åˆ¶ ===== */
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");
const R=160;
const step=2*Math.PI/PRIZES.length;

function drawWheel(){
  ctx.clearRect(0,0,320,320);
  PRIZES.forEach((p,i)=>{
    const start=i*step;
    const end=start+step;
    const mid=start+step/2;

    ctx.beginPath();
    ctx.moveTo(R,R);
    ctx.arc(R,R,R,start,end);
    ctx.fillStyle=`hsl(${i*45},80%,80%)`;
    ctx.fill();

    ctx.save();
    ctx.translate(R,R);
    ctx.rotate(mid);
    ctx.textAlign="right";
    ctx.fillStyle="#374151";
    ctx.font="bold 14px PingFang SC";
    ctx.fillText(p.label,R-20,6);
    ctx.restore();
  });
}
drawWheel();

let angle=0;
function spinTo(i){
  angle+=1440+i*(360/PRIZES.length);
  canvas.style.transform=`rotate(${angle}deg)`;
}

/* ===== é¡µé¢é‡‘å¸ ===== */
const bg=document.getElementById("coins-bg");
for(let i=0;i<20;i++){
  const c=document.createElement("div");
  c.className="bg-coin";
  c.style.left=Math.random()*100+"%";
  c.style.animationDuration=5+Math.random()*6+"s";
  c.style.animationDelay=Math.random()*5+"s";
  bg.appendChild(c);
}
</script>

</body>
</html>
