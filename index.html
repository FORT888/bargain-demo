<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>è”ä¿¡èµ„ Â· æ–°ç”¨æˆ·åŠ©åŠ›è®¡åˆ’</title>

<style>
body{
  margin:0;
  background:linear-gradient(180deg,#f8fafc,#eef2ff);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  color:#0f172a;
}
.container{
  max-width:420px;
  margin:0 auto;
  padding:18px 14px 28px;
}
.card{
  background:#fff;
  border-radius:22px;
  padding:18px;
  box-shadow:0 18px 40px rgba(0,0,0,.08);
  margin-bottom:14px;
}
h1{font-size:22px;margin:0 0 6px}
.sub{font-size:13px;color:#64748b}

/* å¥–å“ */
.prize-title{
  text-align:center;
  font-size:18px;
  font-weight:700;
}
.progress-text{
  text-align:center;
  font-size:13px;
  margin-top:10px;
}

/* è¿›åº¦æ¡ */
.progress{
  height:10px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  margin-top:6px;
}
.progress span{
  display:block;
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#6366f1,#22d3ee);
  transition:width .4s;
}

/* è½¬ç›˜ */
.wheel-wrap{
  position:relative;
  width:260px;
  height:260px;
  margin:20px auto 10px;
}
canvas{
  width:100%;
  height:100%;
  border-radius:50%;
  transition:transform 3.2s cubic-bezier(.2,.9,.25,1);
}

/* é«˜çº§æŒ‡é’ˆ */
.indicator{
  position:absolute;
  top:-6px;
  left:50%;
  transform:translateX(-50%);
  width:42px;
  height:6px;
  border-radius:6px;
  background:linear-gradient(90deg,#f59e0b,#f97316);
  box-shadow:0 4px 12px rgba(0,0,0,.25);
  z-index:6;
}

/* ä¸­å¿ƒ LOGO */
.center{
  position:absolute;
  inset:50%;
  transform:translate(-50%,-50%);
  width:130px;
  height:130px;
  border-radius:50%;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:
    inset 0 0 0 6px #f1f5f9,
    0 10px 30px rgba(0,0,0,.2);
  z-index:5;
}
.center img{
  max-width:75%;
  max-height:75%;
  object-fit:contain;
}

/* æŒ‰é’® */
.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:15px;
  font-weight:600;
}
.primary{background:#4f46e5;color:#fff}
.secondary{background:#eef2ff;color:#4f46e5;margin-top:10px}

/* è§„åˆ™ */
.rules{
  font-size:12px;
  color:#64748b;
  line-height:1.6;
}
</style>
</head>

<body>

<div class="container">

  <div class="card">
    <h1>è”ä¿¡èµ„ Â· æ–°ç”¨æˆ·åŠ©åŠ›è®¡åˆ’</h1>
    <div class="sub">é‚€è¯·å¥½å‹å®ŒæˆåŠ©åŠ›ï¼Œè§£é”å¯¹åº”å¥–åŠ±</div>
  </div>

  <div class="card">
    <div class="prize-title" id="prizeText">ç­‰å¾…åŠ©åŠ›è§£é”</div>

    <div class="progress-text">
      å·²å®Œæˆ <b id="percent">0%</b>
    </div>

    <div class="progress">
      <span id="progressBar"></span>
    </div>

    <div class="wheel-wrap">
      <canvas id="wheel" width="260" height="260"></canvas>
      <div class="indicator"></div>

      <div class="center">
        <!-- ğŸ”¥ æ¢æˆä½ çš„ logo -->
        <img src="logo.png">
      </div>
    </div>
  </div>

  <div class="card">
    <button class="btn primary" id="btnCreate">å‘èµ·åŠ©åŠ›</button>
    <button class="btn secondary" id="btnHelp">å¸®å¥½å‹åŠ©åŠ›</button>
  </div>

  <div class="card rules">
    <b>æ´»åŠ¨è¯´æ˜</b><br>
    1. æ¯ä½ç”¨æˆ·ä»…å¯åŠ©åŠ›ä¸€æ¬¡<br>
    2. è¾¾åˆ°åŠ©åŠ›è¿›åº¦åè‡ªåŠ¨è§£é”å¥–åŠ±<br>
    3. å®ç‰©å¥–åŠ±éœ€å®Œæˆå®åè®¤è¯é¢†å–<br>
    4. å¹³å°ä¿ç•™æ´»åŠ¨æœ€ç»ˆè§£é‡Šæƒ
  </div>

</div>

<script>
/* ===== å¥–å“é…ç½® ===== */
const PRIZES = [
  {key:"66",label:"66å…ƒç°é‡‘çº¢åŒ…",color:"#f87171"},
  {key:"88",label:"88å…ƒç°é‡‘çº¢åŒ…",color:"#fbbf24"},
  {key:"168",label:"168å…ƒç°é‡‘çº¢åŒ…",color:"#34d399"},
  {key:"388",label:"388å…ƒç°é‡‘çº¢åŒ…",color:"#60a5fa"},
  {key:"iphone",label:"iPhone 17 Pro Max",color:"#f97316"}
];

/* ===== ç”»ç›˜ ===== */
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");
const R=130;
const step=2*Math.PI/PRIZES.length;

PRIZES.forEach((p,i)=>{
  ctx.beginPath();
  ctx.moveTo(R,R);
  ctx.arc(R,R,R,i*step,(i+1)*step);
  ctx.fillStyle=p.color;
  ctx.fill();

  ctx.save();
  ctx.translate(R,R);
  ctx.rotate(i*step+step/2);
  ctx.fillStyle="#fff";
  ctx.font="bold 13px sans-serif";
  ctx.textAlign="right";
  ctx.fillText(p.label,R-12,6);
  ctx.restore();
});

let angle=0;
let percent=0;
let unlocked=false;

/* ===== æ­£ç¡®è½¬åˆ°æŒ‡å®šå¥–å“ ===== */
function spinTo(index){
  const per=360/PRIZES.length;
  const target=index*per+per/2;
  angle+=4*360-target+90;
  canvas.style.transform=`rotate(${angle}deg)`;
}

/* ===== æ›´æ–°è¿›åº¦ ===== */
function updateProgress(){
  document.getElementById("percent").innerText=percent+"%";
  document.getElementById("progressBar").style.width=percent+"%";
}

/* ===== å‘èµ·åŠ©åŠ› ===== */
document.getElementById("btnCreate").onclick=()=>{
  percent=0;
  unlocked=false;
  updateProgress();
  document.getElementById("prizeText").innerText="ç­‰å¾…åŠ©åŠ›è§£é”";
};

/* ===== å¸®å¥½å‹åŠ©åŠ› ===== */
document.getElementById("btnHelp").onclick=()=>{
  if(unlocked) return;

  percent=Math.min(percent+20,100);
  updateProgress();

  if(percent===100){
    unlocked=true;

    // ğŸ”¥ åç«¯è¿”å›çš„å¥–å“ indexï¼ˆç¤ºä¾‹ï¼‰
    const prizeIndex=4; // iPhone

    spinTo(prizeIndex);
    document.getElementById("prizeText").innerText=
      "æ­å–œè§£é”ï¼š"+PRIZES[prizeIndex].label;
  }
};
</script>

</body>
</html>


